<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberQuiz - La Matriz Digital</title>
    <style>
        /* Estilos CSS con tem√°tica Cyberpunk */
        :root {
            --color-fondo: #0a0a0f;
            --color-neon-azul: #00ffff;
            --color-neon-rosa: #ff00ff;
            --color-texto: #e0e0e0;
            --color-borde: #333;
        }

        body {
            font-family: 'Consolas', monospace;
            background-color: var(--color-fondo);
            color: var(--color-texto);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .cyber-container {
            width: 100%;
            max-width: 900px;
            background: #15151f;
            border: 2px solid var(--color-neon-azul);
            box-shadow: 0 0 20px var(--color-neon-azul);
            padding: 30px;
            border-radius: 10px;
        }

        h1, h2, h3 {
            color: var(--color-neon-rosa);
            text-shadow: 0 0 5px var(--color-neon-rosa);
            border-bottom: 1px solid var(--color-neon-azul);
            padding-bottom: 5px;
        }
        
        .header-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px 0;
            border-bottom: 1px dashed var(--color-borde);
        }

        .header-info span {
            color: var(--color-neon-azul);
            font-size: 0.9em;
        }

        /* Pregunta y Opciones */
        .question-box {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid var(--color-borde);
            border-radius: 5px;
            background: #0d0d15;
        }

        .options-group label {
            display: block;
            background: #252530;
            margin: 8px 0;
            padding: 12px;
            border-radius: 5px;
            transition: background 0.3s, border 0.3s;
            cursor: pointer;
            border-left: 5px solid var(--color-neon-rosa);
        }

        .options-group label:hover {
            background: #3a3a4a;
        }

        .options-group input[type="radio"] {
            margin-right: 10px;
        }
        
        /* Botones */
        .controls, .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        .controls {
            padding: 15px;
            border-top: 1px solid var(--color-borde);
        }

        .cyber-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
            transition: background 0.3s, box-shadow 0.3s;
        }

        .btn-jarvis {
            background-color: var(--color-neon-azul);
            color: var(--color-fondo);
            box-shadow: 0 0 10px var(--color-neon-azul);
        }

        .btn-jarvis:hover:not(:disabled) {
            background-color: #33ffff;
            box-shadow: 0 0 15px #33ffff;
        }
        
        .btn-nav {
            background-color: var(--color-neon-rosa);
            color: var(--color-fondo);
            box-shadow: 0 0 10px var(--color-neon-rosa);
        }

        .btn-nav:hover:not(:disabled) {
            background-color: #ff33ff;
            box-shadow: 0 0 15px #ff33ff;
        }

        .cyber-button:disabled {
            background-color: #333;
            color: #777;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* JARVIS y Pista */
        #jarvis-console {
            margin-top: 20px;
            padding: 15px;
            border: 1px dashed var(--color-neon-azul);
            background: #000510;
            min-height: 50px;
        }
        
        /* Resultados */
        .results-section h3 {
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 0.9em;
        }
        
        .result-table th, .result-table td {
            border: 1px solid var(--color-borde);
            padding: 8px;
            text-align: left;
        }
        
        .result-table th {
            background-color: #252530;
            color: var(--color-neon-azul);
        }
        
        .correct-answer {
            color: #00ff00;
        }
        
        .incorrect-answer {
            color: #ff4444;
            font-weight: bold;
        }

        /* L√≥gica para 50/50 */
        .option-removed {
            display: none !important;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <div class="cyber-container">
        
        <div id="start-screen">
            <h1>Bienvenido, Netrunner</h1>
            <h2>Proyecto: Cuestionario Cyberpunk - La Matriz Digital</h2>
            <p><strong>Autor:</strong> Samuel Galvis</p>
            <p><strong>Prop√≥sito:</strong> Evaluar y reforzar tu conocimiento en la infraestructura tecnol√≥gica del futuro dist√≥pico.</p>
            
            <h3>Tem√°ticas del Cuestionario</h3>
            <ul>
                <li><strong>Hardware Ciber-mejorado:</strong> Componentes f√≠sicos clave, interfaces neurales e implantes.</li>
                <li><strong>Redes y Netrunning:</strong> La infraestructura de la red global, protocolos y seguridad.</li>
                <li><strong>Software y IA:</strong> Sistemas operativos, virus inform√°ticos avanzados e Inteligencias Artificiales.</li>
                <li><strong>Historia de la Tecnolog√≠a:</strong> Los hitos que llevaron a la era del ciberespacio.</li>
            </ul>
            
            <h3>Reglas de Acceso</h3>
            <p>Se te har√°n **20 preguntas** seleccionadas al azar de nuestra base de datos.</p>
            <p>Tu asistente **JARVIS** est√° disponible con las siguientes utilidades:</p>
            <ul>
                <li>‚úÖ **Pista:** Te da una ayuda contextual (usos ilimitados).</li>
                <li>üõ†Ô∏è **50/50:** Elimina dos opciones incorrectas, dejando solo dos (una correcta y una incorrecta). **¬°L√≠mite de 5 usos!**</li>
            </ul>
            <p>Un cron√≥metro registrar√° tu tiempo de ejecuci√≥n.</p>
            
            <div class="controls">
                <button class="cyber-button btn-nav" onclick="iniciarCuestionario()">Iniciar Ejecuci√≥n</button>
            </div>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="header-info">
                <span>Contador de Sesiones: <strong id="contador-veces">0</strong></span>
                <span>Cron√≥metro: <strong id="cronometro">00:00</strong></span>
                <span>Usos 50/50: <strong id="contador-50-50">5</strong></span>
            </div>

            <div class="question-box">
                <h2><span id="pregunta-numero">Pregunta 1/20</span></h2>
                <p id="pregunta-texto">Cargando...</p>
                
                <div id="opciones-contenedor" class="options-group">
                    </div>
            </div>

            <div class="controls">
                <button id="btn-pista" class="cyber-button btn-jarvis" onclick="jarvis.mostrarPista()">Pista (JARVIS)</button>
                <button id="btn-50-50" class="cyber-button btn-jarvis" onclick="jarvis.usar50_50()">50/50</button>
            </div>
            
            <div id="jarvis-console">
                <strong>JARVIS: </strong> Esperando comandos, Netrunner.
            </div>

            <div class="nav-buttons">
                <button id="btn-anterior" class="cyber-button btn-nav" onclick="navegar(-1)" disabled>Anterior</button>
                <button id="btn-siguiente" class="cyber-button btn-nav" onclick="navegar(1)">Siguiente</button>
            </div>
        </div>
        
        <div id="results-screen" class="hidden">
            <h2 class="results-section">An√°lisis de Ejecuci√≥n Completo</h2>
            <p><strong>Puntuaci√≥n Final:</strong> <span id="puntuacion-final"></span></p>
            <p><strong>Tiempo Total de Ejecuci√≥n:</strong> <span id="tiempo-final"></span></p>
            
            <h3>üìä Retroalimentaci√≥n de JARVIS:</h3>
            <div id="feedback-jarvis" style="padding: 15px; border: 1px solid var(--color-neon-rosa);"></div>
            
            <h3>Revisi√≥n de Logs:</h3>
            <table class="result-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Pregunta</th>
                        <th>Tu Respuesta</th>
                        <th>Respuesta Correcta</th>
                    </tr>
                </thead>
                <tbody id="revision-logs">
                    </tbody>
            </table>
            
            <div class="controls">
                <button class="cyber-button btn-nav" onclick="document.location.reload()">Nuevo Ciclo</button>
            </div>
        </div>

    </div>

    <script>
        // --- BASE DE DATOS DE PREGUNTAS (60 Preguntas) ---
        const BASE_DE_DATOS_PREGUNTAS = [
            { id: 1, pregunta: "¬øQu√© nombre se le da en la jerga Cyberpunk al acto de navegar e interactuar en el ciberespacio?", opciones: ["Jack-In", "Netrunning", "Crashing", "Doxing"], respuesta_correcta: "Netrunning", pista: "Es una palabra compuesta por 'red' y 'correr' en ingl√©s.", tematica: "Redes y Netrunning" },
            { id: 2, pregunta: "¬øCu√°l es el componente de hardware que se considera el 'cerebro' principal de un Netrunner o IA?", opciones: ["GPU", "RAM", "CPU", "SSD"], respuesta_correcta: "CPU", pista: "Su acr√≥nimo significa Unidad Central de Procesamiento.", tematica: "Hardware Ciber-mejorado" },
            { id: 3, pregunta: "En el mundo tecnol√≥gico, ¬øcu√°l es el t√©rmino para una vulnerabilidad de software desconocida por el fabricante?", opciones: ["Exploit", "Zero Day", "Payload", "Backdoor"], respuesta_correcta: "Zero Day", pista: "Se refiere al tiempo que ha pasado desde que se conoce el error.", tematica: "Software y IA" },
            { id: 4, pregunta: "¬øQui√©n populariz√≥ la frase 'El ciberespacio' en su novela Neuromante?", opciones: ["Philip K. Dick", "Isaac Asimov", "William Gibson", "Neal Stephenson"], respuesta_correcta: "William Gibson", pista: "Es considerado el 'padre' del g√©nero Cyberpunk.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 5, pregunta: "¬øQu√© protocolo es esencial para la comunicaci√≥n de datos a trav√©s de internet (La Matriz)?", opciones: ["FTP", "SMTP", "TCP/IP", "HTTP"], respuesta_correcta: "TCP/IP", pista: "Es un conjunto de dos protocolos fundamentales, uno para transmisi√≥n y otro para internet.", tematica: "Redes y Netrunning" },
            { id: 6, pregunta: "¬øQu√© es un 'wetware' en la ficci√≥n Cyberpunk?", opciones: ["Software obsoleto", "Hardware org√°nico", "Implante de memoria", "Conexi√≥n a la red f√≠sica"], respuesta_correcta: "Hardware org√°nico", pista: "Es lo opuesto a 'hardware' o 'software', refiri√©ndose a lo biol√≥gico.", tematica: "Hardware Ciber-mejorado" },
            { id: 7, pregunta: "¬øQu√© tipo de software es dise√±ado para replicarse y propagarse, a menudo sin un 'host'?", opciones: ["Virus", "Troyano", "Gusano (Worm)", "Spyware"], respuesta_correcta: "Gusano (Worm)", pista: "Piensa en el Moloch que devora la red.", tematica: "Software y IA" },
            { id: 8, pregunta: "¬øQu√© hito tecnol√≥gico marca el inicio de la era de la informaci√≥n?", opciones: ["Invenci√≥n del transistor", "Lanzamiento del Sputnik", "Creaci√≥n de ARPANET", "Primer chip de silicio"], respuesta_correcta: "Creaci√≥n de ARPANET", pista: "Fue la precursora de Internet.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 9, pregunta: "¬øCu√°l es el prop√≥sito principal de un 'Firewall' en una red?", opciones: ["Aumentar la velocidad", "Bloquear el spam", "Controlar el tr√°fico", "Distribuir IPs"], respuesta_correcta: "Controlar el tr√°fico", pista: "Act√∫a como una barrera de seguridad, filtrando paquetes.", tematica: "Redes y Netrunning" },
            { id: 10, pregunta: "¬øQu√© significa el acr√≥nimo 'BIOS'?", opciones: ["Basic Input Output System", "Binary Interface Operating Standard", "Base Integrated Open Software", "Booting Information and Output Server"], respuesta_correcta: "Basic Input Output System", pista: "Es el software fundamental que inicializa el hardware al encender la m√°quina.", tematica: "Hardware Ciber-mejorado" },
            { id: 11, pregunta: "¬øQu√© t√©rmino se usa para describir a una IA que ha adquirido conciencia de s√≠ misma?", opciones: ["IA Fuerte", "Singularidad", "IA D√©bil", "NetMind"], respuesta_correcta: "IA Fuerte", pista: "Se refiere a la capacidad de una m√°quina de realizar cualquier tarea intelectual humana.", tematica: "Software y IA" },
            { id: 12, pregunta: "¬øEn qu√© d√©cada se desarroll√≥ el primer sistema operativo gr√°fico (GUI)?", opciones: ["1960s", "1970s", "1980s", "1990s"], respuesta_correcta: "1970s", pista: "El Xerox Alto fue uno de los pioneros.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 13, pregunta: "¬øQu√© m√©trica se utiliza para medir la velocidad de transmisi√≥n de datos en una red?", opciones: ["Latencia", "Ancho de banda", "Protocolo", "Ping"], respuesta_correcta: "Ancho de banda", pista: "Mide la cantidad de datos que pueden pasar por un canal en un tiempo dado.", tematica: "Redes y Netrunning" },
            { id: 14, pregunta: "¬øQu√© tipo de memoria de acceso aleatorio (RAM) se utiliza actualmente en la mayor√≠a de las computadoras personales?", opciones: ["SRAM", "DDR SDRAM", "ROM", "VRAM"], respuesta_correcta: "DDR SDRAM", pista: "Es una evoluci√≥n de la memoria sincr√≥nica que transfiere datos dos veces por ciclo de reloj.", tematica: "Hardware Ciber-mejorado" },
            { id: 15, pregunta: "¬øQu√© lenguaje de programaci√≥n se utiliza a menudo para crear 'scripts' en el lado del cliente de una aplicaci√≥n web?", opciones: ["Python", "C++", "Java", "JavaScript"], respuesta_correcta: "JavaScript", pista: "Es el lenguaje que hace que los sitios web sean interactivos en el navegador.", tematica: "Software y IA" },
            { id: 16, pregunta: "¬øCu√°l fue la primera computadora electr√≥nica de prop√≥sito general, presentada en 1945?", opciones: ["EDSAC", "UNIVAC I", "ENIAC", "Colossus"], respuesta_correcta: "ENIAC", pista: "Pesaba 27 toneladas y consum√≠a mucha electricidad.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 17, pregunta: "¬øQu√© significa el acr√≥nimo 'VPN' en seguridad de redes?", opciones: ["Virtual Private Network", "Very Personal Node", "Verified Protocol Net", "Volatile Proxy Navigation"], respuesta_correcta: "Virtual Private Network", pista: "Crea un t√∫nel seguro sobre una red p√∫blica.", tematica: "Redes y Netrunning" },
            { id: 18, pregunta: "¬øQu√© componente de hardware es crucial para renderizar gr√°ficos complejos y mundos virtuales?", opciones: ["CPU", "GPU", "SSD", "Placa Base"], respuesta_correcta: "GPU", pista: "Su acr√≥nimo significa Unidad de Procesamiento Gr√°fico.", tematica: "Hardware Ciber-mejorado" },
            { id: 19, pregunta: "¬øC√≥mo se llama el proceso de convertir c√≥digo fuente en lenguaje de m√°quina que la CPU puede ejecutar?", opciones: ["Debugging", "Compilaci√≥n", "Enlace", "Interpretaci√≥n"], respuesta_correcta: "Compilaci√≥n", pista: "Es el paso previo a la ejecuci√≥n de programas como los de C++ o Java.", tematica: "Software y IA" },
            { id: 20, pregunta: "¬øQui√©n fue Alan Turing y cu√°l es su contribuci√≥n m√°s famosa a la computaci√≥n?", opciones: ["Creador de la IA", "La M√°quina Enigma", "Inventor del transistor", "El Algoritmo de Google"], respuesta_correcta: "La M√°quina Enigma", pista: "Su trabajo fue fundamental durante la Segunda Guerra Mundial y defini√≥ la computaci√≥n te√≥rica.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 21, pregunta: "¬øQu√© es el 'ping' en el contexto de redes?", opciones: ["Un tipo de virus", "Un comando para probar la conectividad", "Una direcci√≥n IP", "Un protocolo de seguridad"], respuesta_correcta: "Un comando para probar la conectividad", pista: "Se utiliza para medir el tiempo que tardan los paquetes en ir y volver.", tematica: "Redes y Netrunning" },
            { id: 22, pregunta: "¬øQu√© significa que un puerto USB sea 'Tipo C'?", opciones: ["Versi√≥n 3.0", "Conector reversible", "Velocidad de carga r√°pida", "Solo para datos"], respuesta_correcta: "Conector reversible", pista: "No importa c√≥mo lo conectes, siempre funciona.", tematica: "Hardware Ciber-mejorado" },
            { id: 23, pregunta: "¬øQu√© es un 'Rootkit'?", opciones: ["Un kit de desarrollo", "Software malicioso para obtener acceso total", "Un tipo de cortafuegos", "Una herramienta de cifrado"], respuesta_correcta: "Software malicioso para obtener acceso total", pista: "Permite al atacante tener control a nivel de administrador ('root').", tematica: "Software y IA" },
            { id: 24, pregunta: "¬øEn qu√© a√±o se lanz√≥ el primer iPhone, revolucionando la computaci√≥n m√≥vil?", opciones: ["2005", "2007", "2009", "2011"], respuesta_correcta: "2007", pista: "Fue presentado por Steve Jobs.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 25, pregunta: "¬øQu√© es un 'Proxy' en el contexto de internet?", opciones: ["Un servidor de juegos", "Un intermediario entre el usuario y la red", "Un protocolo de red", "Una herramienta de cifrado"], respuesta_correcta: "Un intermediario entre el usuario y la red", pista: "Act√∫a como filtro o cach√© para las peticiones web.", tematica: "Redes y Netrunning" },
            { id: 26, pregunta: "¬øQu√© tipo de almacenamiento se basa en celdas de memoria flash sin partes m√≥viles?", opciones: ["HDD", "Blu-ray", "SSD", "Disquete"], respuesta_correcta: "SSD", pista: "Son mucho m√°s r√°pidos que los discos duros tradicionales.", tematica: "Hardware Ciber-mejorado" },
            { id: 27, pregunta: "¬øQu√© es el 'Open Source' (C√≥digo Abierto)?", opciones: ["Software gratuito", "Software con c√≥digo accesible para modificaci√≥n", "Software de Microsoft", "Cualquier programa en Linux"], respuesta_correcta: "Software con c√≥digo accesible para modificaci√≥n", pista: "Permite la colaboraci√≥n y mejora comunitaria.", tematica: "Software y IA" },
            { id: 28, pregunta: "¬øQui√©n desarroll√≥ la World Wide Web (WWW)?", opciones: ["Bill Gates", "Vint Cerf", "Tim Berners-Lee", "Jeff Bezos"], respuesta_correcta: "Tim Berners-Lee", pista: "Lo hizo mientras trabajaba en el CERN.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 29, pregunta: "¬øQu√© es la 'Latencia' en una conexi√≥n de red?", opciones: ["Velocidad de descarga", "Cantidad de datos transferidos", "Retraso en la transmisi√≥n", "Frecuencia de la se√±al"], respuesta_correcta: "Retraso en la transmisi√≥n", pista: "Es el tiempo que tarda un paquete en llegar a su destino.", tematica: "Redes y Netrunning" },
            { id: 30, pregunta: "¬øQu√© son los 'Ray Tracing Cores' en una GPU moderna?", opciones: ["N√∫cleos para el c√°lculo de sombras y reflejos realistas", "N√∫cleos para IA", "Memoria de video dedicada", "Unidades de reloj"], respuesta_correcta: "N√∫cleos para el c√°lculo de sombras y reflejos realistas", pista: "Mejoran dr√°sticamente el realismo de la iluminaci√≥n.", tematica: "Hardware Ciber-mejorado" },
            { id: 31, pregunta: "¬øCu√°l es un ataque donde se inyectan comandos de c√≥digo no confiable en una aplicaci√≥n web?", opciones: ["DDoS", "Phishing", "SQL Injection", "Man-in-the-Middle"], respuesta_correcta: "SQL Injection", pista: "Apunta a las bases de datos de la aplicaci√≥n.", tematica: "Software y IA" },
            { id: 32, pregunta: "¬øQu√© fue la 'Burbuja .com' a finales de los 90?", opciones: ["Un crecimiento explosivo de empresas de internet", "El lanzamiento de Windows 98", "Una crisis de hardware", "Una ley de protecci√≥n de datos"], respuesta_correcta: "Un crecimiento explosivo de empresas de internet", pista: "Termin√≥ en una ca√≠da del mercado en el 2000.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 33, pregunta: "¬øQu√© es una 'M√°scara de Subred'?", opciones: ["Un sistema operativo", "Un componente de hardware", "Define la porci√≥n de red de una IP", "Un cifrado de red"], respuesta_correcta: "Define la porci√≥n de red de una IP", pista: "Ayuda a distinguir la direcci√≥n de red de la direcci√≥n del host.", tematica: "Redes y Netrunning" },
            { id: 34, pregunta: "¬øQu√© tipo de bus es el est√°ndar moderno para conectar tarjetas gr√°ficas a la placa base?", opciones: ["AGP", "PCI", "PCI Express (PCIe)", "ISA"], respuesta_correcta: "PCI Express (PCIe)", pista: "Es un bus serie de alta velocidad.", tematica: "Hardware Ciber-mejorado" },
            { id: 35, pregunta: "¬øQu√© significa 'Algoritmo' en programaci√≥n?", opciones: ["Un error en el c√≥digo", "Una secuencia finita de pasos para resolver un problema", "Un lenguaje de programaci√≥n", "Un tipo de base de datos"], respuesta_correcta: "Una secuencia finita de pasos para resolver un problema", pista: "Es la 'receta' para la computadora.", tematica: "Software y IA" },
            { id: 36, pregunta: "¬øQu√© se conoce como el 'Bug del Milenio' (Y2K)?", opciones: ["Un virus masivo", "Un problema de formato de fecha en sistemas antiguos", "Una falla de hardware de la NASA", "El fin de Windows 98"], respuesta_correcta: "Un problema de formato de fecha en sistemas antiguos", pista: "Las computadoras solo almacenaban el a√±o con dos d√≠gitos.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 37, pregunta: "¬øQu√© es un 'Botnet'?", opciones: ["Una IA amigable", "Una red de computadoras controladas remotamente para fines maliciosos", "Un protocolo de red", "Un tipo de router"], respuesta_correcta: "Una red de computadoras controladas remotamente para fines maliciosos", pista: "Se usa a menudo para realizar ataques DDoS.", tematica: "Redes y Netrunning" },
            { id: 38, pregunta: "¬øQu√© mide la unidad 'Hertz (Hz)' en un procesador (CPU)?", opciones: ["Consumo de energ√≠a", "Temperatura", "Frecuencia de reloj", "N√∫mero de n√∫cleos"], respuesta_correcta: "Frecuencia de reloj", pista: "Indica la velocidad de las operaciones del procesador.", tematica: "Hardware Ciber-mejorado" },
            { id: 39, pregunta: "¬øQu√© es un 'Compiler' (Compilador)?", opciones: ["Un programa que traduce c√≥digo a lenguaje de m√°quina", "Una herramienta de depuraci√≥n", "Un editor de texto avanzado", "Un tipo de base de datos"], respuesta_correcta: "Un programa que traduce c√≥digo a lenguaje de m√°quina", pista: "Es esencial para lenguajes como C++.", tematica: "Software y IA" },
            { id: 40, pregunta: "¬øCu√°l fue el objetivo principal del proyecto 'Manhattan' en la historia de la tecnolog√≠a?", opciones: ["Primer motor de vapor", "Desarrollo de la bomba at√≥mica", "Primer viaje espacial", "Creaci√≥n de la televisi√≥n"], respuesta_correcta: "Desarrollo de la bomba at√≥mica", pista: "Aunque no es computaci√≥n pura, impuls√≥ el desarrollo de computadoras como Colossus.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 41, pregunta: "¬øQu√© significa 'DHCP' en la configuraci√≥n de redes?", opciones: ["Dynamic Host Configuration Protocol", "Data Handling Control Point", "Digital Hardwired Connection Protocol", "Decentralized Host Communication Port"], respuesta_correcta: "Dynamic Host Configuration Protocol", pista: "Asigna autom√°ticamente direcciones IP a los dispositivos en una red.", tematica: "Redes y Netrunning" },
            { id: 42, pregunta: "¬øCu√°l es la funci√≥n principal de la 'Placa Base' (Motherboard)?", opciones: ["Almacenar datos", "Conectar todos los componentes de hardware", "Procesar gr√°ficos", "Suministrar energ√≠a"], respuesta_correcta: "Conectar todos los componentes de hardware", pista: "Es el circuito principal donde todo se comunica.", tematica: "Hardware Ciber-mejorado" },
            { id: 43, pregunta: "¬øQu√© es el 'Machine Learning'?", opciones: ["Un sistema operativo", "Un subcampo de la IA que permite a las m√°quinas aprender de datos", "Un nuevo tipo de chip", "Un m√©todo de cifrado"], respuesta_correcta: "Un subcampo de la IA que permite a las m√°quinas aprender de datos", pista: "Se basa en alimentar datos a un modelo para que haga predicciones.", tematica: "Software y IA" },
            { id: 44, pregunta: "¬øQui√©n es la figura clave detr√°s de la Ley de Moore?", opciones: ["Bill Gates", "Gordon Moore", "Steve Wozniak", "Jack Kilby"], respuesta_correcta: "Gordon Moore", pista: "Cofundador de Intel, predijo el crecimiento de los transistores.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 45, pregunta: "¬øQu√© tipo de ataque intenta agotar los recursos de un servidor para que no pueda responder a peticiones leg√≠timas?", opciones: ["Phishing", "Malware", "DDoS", "Spoofing"], respuesta_correcta: "DDoS", pista: "Utiliza m√∫ltiples m√°quinas ('bots') para saturar un objetivo.", tematica: "Redes y Netrunning" },
            { id: 46, pregunta: "¬øQu√© hace el 'Overclocking'?", opciones: ["Reducir la velocidad de la CPU", "Aumentar la frecuencia del reloj de un componente por encima de su valor nominal", "Actualizar el BIOS", "Limpiar el sistema"], respuesta_correcta: "Aumentar la frecuencia del reloj de un componente por encima de su valor nominal", pista: "Se hace para obtener m√°s rendimiento, pero genera m√°s calor.", tematica: "Hardware Ciber-mejorado" },
            { id: 47, pregunta: "¬øQu√© es el 'Cifrado de Extremo a Extremo'?", opciones: ["Un m√©todo para ocultar archivos", "Una t√©cnica que asegura que solo los usuarios comunicantes puedan leer los mensajes", "Un tipo de virus", "Un protocolo de red obsoleto"], respuesta_correcta: "Una t√©cnica que asegura que solo los usuarios comunicantes puedan leer los mensajes", pista: "Se usa en aplicaciones de mensajer√≠a seguras.", tematica: "Software y IA" },
            { id: 48, pregunta: "¬øCu√°l es el nombre del primer 'Bug' documentado en la historia de la computaci√≥n?", opciones: ["Virus 1.0", "Error de software", "Una polilla real en un rel√©", "Falla de la v√°lvula"], respuesta_correcta: "Una polilla real en un rel√©", pista: "Grace Hopper encontr√≥ el insecto atascado en el Mark II.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 49, pregunta: "¬øQu√© es un 'Subdominio'?", opciones: ["La parte principal de un dominio", "Una direcci√≥n IP", "Una extensi√≥n de un dominio principal (e.g., blog.ejemplo.com)", "Un servidor de nombres"], respuesta_correcta: "Una extensi√≥n de un dominio principal (e.g., blog.ejemplo.com)", pista: "Permite organizar diferentes secciones de un sitio web.", tematica: "Redes y Netrunning" },
            { id: 50, pregunta: "¬øQu√© son los 'Slots DIMM' en una placa base?", opciones: ["Ranuras para la tarjeta gr√°fica", "Conectores para discos duros", "Ranuras para m√≥dulos de memoria RAM", "Puertos USB"], respuesta_correcta: "Ranuras para m√≥dulos de memoria RAM", pista: "Es donde se instala la memoria vol√°til.", tematica: "Hardware Ciber-mejorado" },
            { id: 51, pregunta: "¬øQu√© es un 'Framework' en desarrollo de software?", opciones: ["Un lenguaje de programaci√≥n", "Un conjunto de herramientas y librer√≠as que proveen una estructura de trabajo", "Un tipo de base de datos", "Un error de compilaci√≥n"], respuesta_correcta: "Un conjunto de herramientas y librer√≠as que proveen una estructura de trabajo", pista: "Ejemplos populares incluyen React o Django.", tematica: "Software y IA" },
            { id: 52, pregunta: "¬øCu√°l es el nombre de la primera persona considerada 'programadora' de la historia?", opciones: ["Marie Curie", "Ada Lovelace", "Grace Hopper", "Hedy Lamarr"], respuesta_correcta: "Ada Lovelace", pista: "Trabaj√≥ en la M√°quina Anal√≠tica de Charles Babbage.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 53, pregunta: "¬øQu√© hace un 'Router' en una red?", opciones: ["Generar la se√±al de internet", "Conectar diferentes redes y dirigir el tr√°fico entre ellas", "Almacenar archivos", "Cifrar datos"], respuesta_correcta: "Conectar diferentes redes y dirigir el tr√°fico entre ellas", pista: "Es esencial para enviar paquetes entre tu red local e internet.", tematica: "Redes y Netrunning" },
            { id: 54, pregunta: "¬øQu√© tipo de disco duro tiene el factor de forma m√°s peque√±o (2.5 pulgadas) y se utiliza en laptops?", opciones: ["HDD de escritorio", "SSD M.2", "HDD para laptop", "HDD SAS"], respuesta_correcta: "HDD para laptop", pista: "Es la versi√≥n m√°s compacta y lenta de los discos mec√°nicos.", tematica: "Hardware Ciber-mejorado" },
            { id: 55, pregunta: "¬øQu√© es la 'Recursividad' en programaci√≥n?", opciones: ["Un error de bucle infinito", "Una funci√≥n que se llama a s√≠ misma", "Un tipo de variable", "Un m√©todo de cifrado"], respuesta_correcta: "Una funci√≥n que se llama a s√≠ misma", pista: "Se usa a menudo para resolver problemas que se pueden dividir en subproblemas m√°s peque√±os.", tematica: "Software y IA" },
            { id: 56, pregunta: "¬øQu√© concepto describe el desarrollo donde la interfaz entre la m√°quina y el cerebro humano se vuelve indistinguible?", opciones: ["Transhumanismo", "Post-cibern√©tica", "Singularidad", "Conexi√≥n Neural"], respuesta_correcta: "Transhumanismo", pista: "Es la filosof√≠a que busca mejorar la condici√≥n humana con tecnolog√≠a.", tematica: "Historia de la Tecnolog√≠a" },
            { id: 57, pregunta: "¬øQu√© significa 'DNS' en internet?", opciones: ["Digital Network System", "Domain Name System", "Data Node Server", "Dynamic Naming Standard"], respuesta_correcta: "Domain Name System", pista: "Traduce nombres de sitios web a direcciones IP.", tematica: "Redes y Netrunning" },
            { id: 58, pregunta: "¬øCu√°l es la funci√≥n del 'Northbridge' (puente norte) en las placas base antiguas?", opciones: ["Gestionar el almacenamiento", "Conectar la CPU con la RAM y la GPU", "Controlar los puertos USB", "Administrar la energ√≠a"], respuesta_correcta: "Conectar la CPU con la RAM y la GPU", pista: "Fue reemplazado por la integraci√≥n de su funcionalidad en la propia CPU.", tematica: "Hardware Ciber-mejorado" },
            { id: 59, pregunta: "¬øQu√© es un 'API'?", opciones: ["Un tipo de virus", "Un cable de conexi√≥n", "Interfaz de Programaci√≥n de Aplicaciones", "Una base de datos"], respuesta_correcta: "Interfaz de Programaci√≥n de Aplicaciones", pista: "Permite que diferentes piezas de software se comuniquen entre s√≠.", tematica: "Software y IA" },
            { id: 60, pregunta: "¬øQu√© t√©rmino describe el uso de √≥rganos sint√©ticos o mejoras mec√°nicas en el cuerpo humano?", opciones: ["Bi√≥nica", "Cibern√©tica", "Aumentos", "Implantes"], respuesta_correcta: "Cibern√©tica", pista: "Piensa en el campo que une la mec√°nica y la biolog√≠a.", tematica: "Hardware Ciber-mejorado" }
        ];

        // --- VARIABLES DE ESTADO ---
        let preguntasSeleccionadas = [];
        let preguntaActualIndice = 0;
        let puntuacion = 0;
        let respuestasJugador = []; // Almacena { id: ID, respuesta: 'opcion elegida', fifty_fifty_used: true/false }
        let contador5050 = 5;
        let cronometroInicio = 0;
        let intervalId = null;

        // Cargar el contador de veces del almacenamiento local
        let vecesCuestionarioHecho = parseInt(localStorage.getItem('vecesCuestionarioHecho') || 0);

        // --- FUNCIONES CORE ---

        /**
         * Funci√≥n de utilidad para mezclar un array (Algoritmo de Fisher-Yates).
         * @param {Array} array
         */
        function mezclarArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Prepara el cuestionario: selecciona preguntas y reinicia contadores.
         */
        function iniciarCuestionario() {
            // 1. Ocultar inicio, mostrar quiz
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('results-screen').classList.add('hidden');

            // 2. Variables de estado
            puntuacion = 0;
            preguntaActualIndice = 0;
            respuestasJugador = [];
            contador5050 = 5;
            vecesCuestionarioHecho++;
            localStorage.setItem('vecesCuestionarioHecho', vecesCuestionarioHecho);

            // 3. Selecci√≥n y mezcla de preguntas (20 de 60)
            const baseMezclada = [...BASE_DE_DATOS_PREGUNTAS];
            mezclarArray(baseMezclada);
            preguntasSeleccionadas = baseMezclada.slice(0, 20);

            // Inicializar el array de respuestas del jugador
            preguntasSeleccionadas.forEach(q => {
                // Mezclamos las opciones de cada pregunta al inicio
                mezclarArray(q.opciones);
                respuestasJugador.push({ id: q.id, respuesta: null, fifty_fifty_used: false, opciones_actuales: q.opciones });
            });

            // 4. Iniciar Cron√≥metro
            cronometroInicio = Date.now();
            if (intervalId) clearInterval(intervalId);
            intervalId = setInterval(actualizarCronometro, 1000);
            
            // 5. Mostrar la primera pregunta
            document.getElementById('contador-veces').textContent = vecesCuestionarioHecho;
            document.getElementById('contador-50-50').textContent = contador5050;
            mostrarPreguntaActual();
        }

        /**
         * Muestra la pregunta actual y sus opciones.
         */
        function mostrarPreguntaActual() {
            const index = preguntaActualIndice;
            const pregunta = preguntasSeleccionadas[index];
            const respuestaGuardada = respuestasJugador[index].respuesta;

            // Actualizar el encabezado y el texto de la pregunta
            document.getElementById('pregunta-numero').textContent = `Pregunta ${index + 1}/20 (Tem√°tica: ${pregunta.tematica})`;
            document.getElementById('pregunta-texto').textContent = pregunta.pregunta;
            document.getElementById('contador-50-50').textContent = contador5050;
            
            // Generar opciones de respuesta
            const opcionesContenedor = document.getElementById('opciones-contenedor');
            opcionesContenedor.innerHTML = '';

            // Usamos las opciones guardadas en respuestasJugador para respetar el 50/50
            const opcionesDisponibles = respuestasJugador[index].opciones_actuales;

            opcionesDisponibles.forEach(opcion => {
                const isRemoved = respuestasJugador[index].fifty_fifty_used &&
                                 opcion !== pregunta.respuesta_correcta &&
                                 opcion !== respuestasJugador[index].opcion_incorrecta_restante &&
                                 !opcionesDisponibles.includes(opcion); // Si fue eliminada por el 50/50

                const label = document.createElement('label');
                label.className = isRemoved ? 'option-removed' : '';
                label.innerHTML = `
                    <input type="radio" name="respuesta" value="${opcion}" ${opcion === respuestaGuardada ? 'checked' : ''}>
                    ${opcion}
                `;
                opcionesContenedor.appendChild(label);
            });

            // L√≥gica de botones de navegaci√≥n
            document.getElementById('btn-anterior').disabled = index === 0;
            document.getElementById('btn-siguiente').textContent = index === 19 ? 'Finalizar' : 'Siguiente';
            
            // Re-habilitar/Deshabilitar 50/50 si ya fue usado en esta pregunta
            document.getElementById('btn-50-50').disabled = respuestasJugador[index].fifty_fifty_used || contador5050 === 0;
            
            // Limpiar consola de JARVIS
            jarvis.escribirMensaje('Esperando comandos, Netrunner.');
        }

        /**
         * Almacena la respuesta del jugador y navega.
         * @param {number} direccion - (+1 para siguiente, -1 para anterior)
         */
        function navegar(direccion) {
            // Guardar respuesta actual antes de navegar
            const radios = document.getElementsByName('respuesta');
            let respuestaElegida = null;
            for (const radio of radios) {
                if (radio.checked) {
                    respuestaElegida = radio.value;
                    break;
                }
            }
            respuestasJugador[preguntaActualIndice].respuesta = respuestaElegida;

            // Navegar
            preguntaActualIndice += direccion;

            if (preguntaActualIndice >= 20) {
                // Finalizar
                finalizarCuestionario();
            } else if (preguntaActualIndice < 0) {
                // No deber√≠a suceder si el bot√≥n Anterior est√° deshabilitado
                preguntaActualIndice = 0;
            } else {
                // Mostrar siguiente/anterior pregunta
                mostrarPreguntaActual();
            }
        }

        /**
         * Mantiene el cron√≥metro actualizado.
         */
        function actualizarCronometro() {
            const tiempoTranscurrido = Date.now() - cronometroInicio;
            const segundos = Math.floor((tiempoTranscurrido / 1000) % 60);
            const minutos = Math.floor((tiempoTranscurrido / (1000 * 60)) % 60);

            const tiempoFormateado = 
                `${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
            
            document.getElementById('cronometro').textContent = tiempoFormateado;
        }

        /**
         * Calcula la puntuaci√≥n y muestra los resultados.
         */
        function finalizarCuestionario() {
            // 1. Detener Cron√≥metro
            clearInterval(intervalId);
            const tiempoFinal = document.getElementById('cronometro').textContent;

            // 2. Calcular Puntuaci√≥n y Retroalimentaci√≥n
            puntuacion = 0;
            const logs = [];

            preguntasSeleccionadas.forEach((q, index) => {
                const respuestaJugador = respuestasJugador[index].respuesta;
                const esCorrecta = respuestaJugador === q.respuesta_correcta;
                if (esCorrecta) {
                    puntuacion++;
                }

                logs.push({
                    numero: index + 1,
                    pregunta: q.pregunta,
                    jugador: respuestaJugador || 'No Respondida',
                    correcta: q.respuesta_correcta,
                    esCorrecta: esCorrecta
                });
            });

            // 3. Generar Retroalimentaci√≥n de JARVIS
            let feedback = '';
            if (puntuacion >= 18) {
                feedback = "¬°Impresionante! Tienes acceso root a la Matriz. Tu conocimiento es digno de un 'Ghost in the Shell'. Dominio excepcional.";
            } else if (puntuacion >= 12) {
                feedback = "Conexi√≥n estable. Tienes un buen entendimiento del sistema. Contin√∫a hackeando, y pronto dominar√°s la Net.";
            } else {
                feedback = "Fallo de conexi√≥n. Tu se√±al es d√©bil. Revisa tus logs y vuelve a intentarlo para evitar ser un 'rebotante' en el ciberespacio.";
            }
            
            // 4. Mostrar Resultados
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            
            document.getElementById('puntuacion-final').textContent = `${puntuacion} / 20`;
            document.getElementById('tiempo-final').textContent = tiempoFinal;
            document.getElementById('feedback-jarvis').textContent = feedback;
            
            // Generar tabla de logs
            const revisionLogs = document.getElementById('revision-logs');
            revisionLogs.innerHTML = logs.map(log => `
                <tr>
                    <td>${log.numero}</td>
                    <td>${log.pregunta}</td>
                    <td class="${log.esCorrecta ? 'correct-answer' : 'incorrect-answer'}">${log.jugador}</td>
                    <td class="correct-answer">${log.correcta}</td>
                </tr>
            `).join('');
        }

        // --- ASISTENTE JARVIS ---
        const jarvis = {
            console: document.getElementById('jarvis-console'),
            
            escribirMensaje(mensaje) {
                this.console.innerHTML = `<strong>JARVIS: </strong> ${mensaje}`;
            },

            mostrarPista() {
                const pregunta = preguntasSeleccionadas[preguntaActualIndice];
                this.escribirMensaje(`Analizando datos... La pista para esta secuencia es: **${pregunta.pista}**.`);
            },

            usar50_50() {
                if (contador5050 <= 0 || respuestasJugador[preguntaActualIndice].fifty_fifty_used) {
                    this.escribirMensaje("El sistema de depuraci√≥n 50/50 ha alcanzado su l√≠mite. Requiere reinicio. (0 usos restantes).");
                    return;
                }

                contador5050--;
                respuestasJugador[preguntaActualIndice].fifty_fifty_used = true;
                document.getElementById('contador-50-50').textContent = contador5050;
                document.getElementById('btn-50-50').disabled = true;

                const pregunta = preguntasSeleccionadas[preguntaActualIndice];
                const opciones = pregunta.opciones;
                const correcta = pregunta.respuesta_correcta;
                
                // Encontrar las incorrectas
                let incorrectas = opciones.filter(op => op !== correcta);
                
                // Seleccionar dos incorrectas para eliminar
                mezclarArray(incorrectas);
                
                // La opci√≥n incorrecta que queda es la primera de las que no se eliminan
                const opcionIncorrectaRestante = incorrectas[0];
                respuestasJugador[preguntaActualIndice].opcion_incorrecta_restante = opcionIncorrectaRestante;

                // Las opciones a ELIMINAR son las dos √∫ltimas de las incorrectas (siempre que haya 3)
                const opcionesAEliminar = incorrectas.slice(1, 3);
                
                // Actualizar la lista de opciones para la UI (opciones_actuales solo contiene las 4 originales)
                const opcionesContenedor = document.getElementById('opciones-contenedor');
                const labels = opcionesContenedor.querySelectorAll('label');

                labels.forEach(label => {
                    const input = label.querySelector('input');
                    if (opcionesAEliminar.includes(input.value)) {
                        label.classList.add('option-removed');
                        input.disabled = true; // Deshabilitar el radio button
                    }
                });

                this.escribirMensaje("Acci√≥n autorizada. Dos opciones cr√≠ticas han sido purgadas. ¬°Elige sabiamente, Netrunner!");
            }
        };

        // Inicializar el contador de veces al cargar la p√°gina
        document.getElementById('contador-veces').textContent = vecesCuestionarioHecho;
    </script>

</body>
</html>
