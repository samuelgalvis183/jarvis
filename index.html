<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberQuiz - La Matriz Digital</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        /* Importaci√≥n de fuentes */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap');

        :root {
            --color-bg-dark: #0f0f1a;
            --color-neon-blue: #00ffff;
            --color-neon-pink: #ff00ff;
            --color-text-light: #e0e0e0;
            --color-accent-green: #00ff00;
            --color-error-red: #ff3366;
        }

        body {
            background-color: var(--color-bg-dark);
            color: var(--color-text-light);
            font-family: 'Share Tech Mono', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        #quiz-container {
            width: 100%;
            max-width: 800px;
            padding: 30px;
            border: 2px solid var(--color-neon-blue);
            box-shadow: 0 0 40px var(--color-neon-blue), 0 0 10px var(--color-neon-pink) inset;
            background: rgba(15, 15, 26, 0.85);
            border-radius: 10px;
        }

        /* Estilo de texto Neon */
        .neon-text {
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            color: var(--color-neon-blue);
            text-shadow: 0 0 5px var(--color-neon-blue), 0 0 10px var(--color-neon-blue);
            margin-bottom: 20px;
        }

        /* Bloque de Informaci√≥n de Inicio/Resultados */
        .info-block {
            padding: 15px;
            border: 1px dashed var(--color-neon-pink);
            margin-bottom: 20px;
            background: rgba(255, 0, 255, 0.05);
        }

        .info-block h2, .info-block h3 {
            color: var(--color-accent-green);
            text-shadow: none;
            font-family: 'Orbitron', sans-serif;
        }

        .info-block ul {
            list-style-type: '‚ö° ';
            padding-left: 20px;
        }

        .info-block hr {
            border: 0;
            height: 1px;
            background: linear-gradient(to right, transparent, var(--color-neon-blue), transparent);
            margin: 15px 0;
        }

        /* Botones de Acci√≥n */
        .action-button, .jarvis-button, .nav-button {
            cursor: pointer;
            padding: 10px 20px;
            margin: 5px;
            border: 2px solid var(--color-neon-blue);
            background: transparent;
            color: var(--color-neon-blue);
            text-transform: uppercase;
            font-family: 'Orbitron', sans-serif;
            transition: all 0.3s ease;
            box-shadow: 0 0 5px var(--color-neon-blue);
        }

        .action-button:hover, .jarvis-button:hover, .nav-button:hover {
            background: var(--color-neon-blue);
            color: var(--color-bg-dark);
            box-shadow: 0 0 15px var(--color-neon-blue);
        }

        .action-button:disabled, .nav-button:disabled, .jarvis-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: transparent;
            color: var(--color-text-light);
            border: 2px solid var(--color-text-light);
            box-shadow: none;
        }

        /* Estilo de la barra de estad√≠sticas */
        .stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 10px;
            margin-bottom: 20px;
            border-top: 1px solid var(--color-neon-pink);
            border-bottom: 1px solid var(--color-neon-pink);
            background: rgba(255, 0, 255, 0.05);
        }

        .stats-bar strong {
            color: var(--color-accent-green);
        }

        /* Pregunta y Opciones */
        #question-area {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid var(--color-neon-blue);
        }

        #question-text {
            font-size: 1.2em;
            color: var(--color-text-light);
            margin-bottom: 15px;
        }

        #options-container {
            display: flex;
            flex-direction: column;
        }

        .option-button {
            text-align: left;
            padding: 10px 15px;
            margin: 5px 0;
            border: 1px solid var(--color-neon-blue);
            background: rgba(0, 255, 255, 0.05);
            color: var(--color-text-light);
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .option-button:hover:not(.disabled) {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--color-neon-pink);
        }

        .option-button.selected {
            border-color: var(--color-accent-green);
            background: rgba(0, 255, 0, 0.1);
        }

        .option-button.disabled {
            opacity: 0.3;
            cursor: default;
            background: rgba(255, 51, 102, 0.05);
            border-color: var(--color-error-red);
        }

        /* √Årea de JARVIS */
        #jarvis-area {
            text-align: center;
            margin-bottom: 20px;
        }

        #jarvis-feedback {
            margin-top: 10px;
            color: var(--color-neon-pink);
        }

        /* Botones de Navegaci√≥n */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .nav-button {
            flex-grow: 1;
            margin: 0 10px;
        }

        /* Tabla de Resultados */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 0.9em;
        }

        table th, table td {
            border: 1px solid var(--color-neon-blue);
            padding: 8px;
            text-align: left;
        }

        table th {
            background-color: rgba(0, 255, 255, 0.1);
            color: var(--color-neon-blue);
            font-family: 'Orbitron', sans-serif;
        }

        .correct-answer {
            color: var(--color-accent-green);
        }

        .incorrect-answer {
            color: var(--color-error-red);
        }
    </style>
</head>
<body>

    <div id="quiz-container">
        
        <div id="start-screen">
            <h1 class="neon-text">CyberQuiz - La Matriz Digital</h1>
            
            <div class="info-block">
                <h2># Bienvenido, Netrunner</h2>
                
                <p><strong>Proyecto:</strong> Cuestionario Cyberpunk - La Matriz Digital</p>
                <p><strong>Autor:</strong> Samuel Galvis</p>
                <p><strong>Prop√≥sito:</strong> Evaluar y reforzar tu conocimiento en la infraestructura tecnol√≥gica del futuro dist√≥pico.</p>
                
                <hr>

                <h3>Tem√°ticas del Cuestionario</h3>
                <ul>
                    <li>**Hardware Ciber-mejorado:** Componentes f√≠sicos clave, interfaces neurales e implantes.</li>
                    <li>**Redes y Netrunning:** La infraestructura de la red global, protocolos y seguridad.</li>
                    <li>**Software y IA:** Sistemas operativos, virus inform√°ticos avanzados e Inteligencias Artificiales.</li>
                    <li>**Historia de la Tecnolog√≠a:** Los hitos que llevaron a la era del ciberespacio.</li>
                </ul>
                
                <hr>

                <h3>Reglas de Acceso</h3>
                <p>Se te har√°n **20 preguntas** seleccionadas al azar de nuestra base de datos (60 preguntas).</p>
                <p>Tu asistente **JARVIS** est√° disponible con las siguientes utilidades:</p>
                <ul>
                    <li>‚úÖ **Pista:** Te da una ayuda contextual (usos ilimitados).</li>
                    <li>üõ†Ô∏è **50/50:** Elimina dos opciones incorrectas, dejando solo dos. **¬°L√≠mite de 5 usos!**</li>
                </ul>
                <p>Un cron√≥metro registrar√° tu tiempo de ejecuci√≥n.</p>
            </div>

            <button id="start-button" class="action-button">Iniciar Ejecuci√≥n</button>

            <div class="stats-bar">
                <span>Contador de Sesiones: <strong id="session-counter">0</strong></span>
            </div>
        </div>

        <div id="quiz-screen" style="display: none;">
            
            <div class="stats-bar">
                <span>Cron√≥metro: <strong id="timer">00:00</strong></span>
                <span>Usos 50/50: <strong id="uses-50-50">5</strong></span>
            </div>

            <h2 id="question-index" class="neon-text">Pregunta 1/20</h2>
            
            <div id="question-area">
                <p id="question-text">Cargando...</p>
                <div id="options-container"></div>
            </div>

            <div id="jarvis-area">
                <button id="hint-button" class="jarvis-button">Pista (JARVIS)</button>
                <button id="fifty-fifty-button" class="jarvis-button">50/50</button>
                <p id="jarvis-feedback"><strong>JARVIS:</strong> Esperando comandos, Netrunner.</p>
            </div>

            <div class="navigation-buttons">
                <button id="prev-button" class="nav-button" disabled>Anterior</button>
                <button id="next-button" class="nav-button">Siguiente</button>
                <button id="finish-button" class="action-button" style="display: none;">Finalizar Cuestionario</button>
            </div>
            
        </div>

        <div id="results-screen" style="display: none;">
            <h2 class="neon-text">## An√°lisis de Ejecuci√≥n Completo</h2>
            
            <div class="info-block">
                <p><strong>Puntuaci√≥n Final:</strong> <span id="final-score"></span></p>
                <p><strong>Tiempo Total de Ejecuci√≥n:</strong> <span id="final-time"></span></p>
            </div>

            <h3>üìä Retroalimentaci√≥n de JARVIS:</h3>
            <p id="feedback-message"></p>
            
            <h3>Revisi√≥n de Logs:</h3>
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Pregunta</th>
                        <th>Tu Respuesta</th>
                        <th>Respuesta Correcta</th>
                    </tr>
                </thead>
                <tbody id="review-table-body">
                    </tbody>
            </table>
            
            <button id="new-cycle-button" class="action-button">Nuevo Ciclo</button>
        </div>

    </div>

    <script>
        // ===============================================
        // 1. BASE DE DATOS DE PREGUNTAS (60 preguntas)
        // ===============================================
        const ALL_QUESTIONS = [
            // HARDWARE CIBER-MEJORADO
            {
                q: "¬øCu√°l es el prop√≥sito principal de un implante 'Datajack' en la cultura Cyberpunk?",
                options: ["Aumentar la fuerza f√≠sica.", "Conexi√≥n directa del cerebro a la red o dispositivos.", "Mejorar la visi√≥n nocturna.", "Generar energ√≠a para cibern√©ticos."],
                answer: "Conexi√≥n directa del cerebro a la red o dispositivos.",
                hint: "Piensa en la necesidad de interactuar directamente con la Matrix digital sin un teclado."
            },
            {
                q: "¬øQu√© componente es esencial para un 'Netrunner' para interactuar con la Red Global, a menudo llevado en la cabeza?",
                options: ["Un Power Glove.", "Una Interfaz Neural (Neural Interface).", "Un Chip de Realidad Aumentada.", "Un generador de escudo de energ√≠a."],
                answer: "Una Interfaz Neural (Neural Interface).",
                hint: "Es el hardware que media la conexi√≥n neuronal-digital."
            },
            {
                q: "En el contexto de la tecnolog√≠a futurista, ¬øqu√© se conoce com√∫nmente como 'Cromo'?",
                options: ["Una moneda digital.", "Modificaciones f√≠sicas y est√©ticas con partes mec√°nicas.", "Un tipo de virus inform√°tico.", "Un material ligero para veh√≠culos."],
                answer: "Modificaciones f√≠sicas y est√©ticas con partes mec√°nicas.",
                hint: "Se refiere a las mejoras corporales, a menudo brillantes o met√°licas."
            },
            {
                q: "¬øQu√© tecnolog√≠a permite la 'transferencia de conciencia' o la carga de la mente en un cuerpo sint√©tico?",
                options: ["Cryo-Sleep.", "Braindance.", "Enfajamiento (Sleeve/Inking).", "Data Mining Avanzado."],
                answer: "Enfajamiento (Sleeve/Inking).",
                hint: "Concepto popularizado por la idea de cambiar de 'funda' o cuerpo."
            },
            {
                q: "¬øCu√°l es una desventaja com√∫n de los implantes cibern√©ticos a largo plazo?",
                options: ["Aumento de la longevidad.", "Rechazo corporal o 'Ciberpsicosis'.", "Necesidad de recarga constante.", "Disminuci√≥n de la inteligencia."],
                answer: "Rechazo corporal o 'Ciberpsicosis'.",
                hint: "Los humanos luchan por mantener su humanidad frente a las m√°quinas."
            },
            {
                q: "¬øQu√© tipo de pantalla se proyecta directamente sobre el ojo de un usuario?",
                options: ["LCD.", "OLED.", "Heads-Up Display (HUD) de Ret√≠cula.", "Monitor de Plasma."],
                answer: "Heads-Up Display (HUD) de Ret√≠cula.",
                hint: "Piensa en las pantallas que muestran informaci√≥n superpuesta a la visi√≥n real."
            },
            {
                q: "¬øCu√°l es la funci√≥n principal de un Chip de Memoria Biol√≥gica?",
                options: ["Almacenar datos de la red.", "Mejorar la funci√≥n pulmonar.", "Aumentar la capacidad de almacenamiento y procesamiento del cerebro.", "Sustituir el coraz√≥n."],
                answer: "Aumentar la capacidad de almacenamiento y procesamiento del cerebro.",
                hint: "Es una mejora directa a la memoria y cognici√≥n."
            },
            {
                q: "¬øQu√© interfaz sensorial permite a un usuario sentir y moverse en un entorno virtual sin moverse f√≠sicamente?",
                options: ["Haptic Feedback Suit.", "Un Data Terminal.", "Un Bio-Esc√°ner.", "Un Chip de voz."],
                answer: "Haptic Feedback Suit.",
                hint: "Piensa en el sentido del tacto en la realidad virtual."
            },
            {
                q: "Si un implante requiere una fuente de alimentaci√≥n externa o interna, ¬øc√≥mo se denomina este tipo de dispositivo?",
                options: ["Wetware.", "Hard-Wired.", "Powered Cybernetics.", "Soft-Wired."],
                answer: "Powered Cybernetics.",
                hint: "Implantes que consumen energ√≠a para funcionar."
            },
            {
                q: "¬øQu√© dispositivo f√≠sico se utiliza para almacenar y transferir grandes vol√∫menes de datos directamente entre usuarios?",
                options: ["Data Pad o Shard.", "Lector de cintas.", "Un CD-ROM.", "Un servidor central."],
                answer: "Data Pad o Shard.",
                hint: "Son peque√±os dispositivos de almacenamiento port√°tiles y de f√°cil intercambio."
            },
            // REDES Y NETRUNNING
            {
                q: "¬øQu√© t√©rmino describe el mundo digital tridimensional de informaci√≥n global al que acceden los Netrunners?",
                options: ["El Submundo.", "La Darknet.", "La Matriz o Ciberespacio.", "El Ether."],
                answer: "La Matriz o Ciberespacio.",
                hint: "Es el nombre com√∫n para la totalidad de la red digital."
            },
            {
                q: "¬øQu√© nombre se le da a la defensa automatizada de una red corporativa o un servidor?",
                options: ["Firewall de Sombra.", "ICU (Unidad de Cuidados Intensivos).", "ICE (Intrusion Countermeasures Electronics).", "Protocolo Ghost."],
                answer: "ICE (Intrusion Countermeasures Electronics).",
                hint: "La sigla se traduce como Contramedidas Electr√≥nicas de Intrusi√≥n."
            },
            {
                q: "¬øQu√© es un 'Blackwall' en una red futurista?",
                options: ["Un servidor de juegos en l√≠nea.", "Una barrera de seguridad de IA inexpugnable que separa la Red.", "Una base de datos de usuarios prohibidos.", "Un tipo de cifrado obsoleto."],
                answer: "Una barrera de seguridad de IA inexpugnable que separa la Red.",
                hint: "Es la frontera oscura y peligrosa de la Red, m√°s all√° de la seguridad conocida."
            },
            {
                q: "¬øQu√© protocolo de red virtual permite la simulaci√≥n de experiencias sensoriales para el usuario, a menudo ilegalmente grabadas?",
                options: ["VPN.", "Braindance (BD).", "Protocolo SSH.", "Red P2P."],
                answer: "Braindance (BD).",
                hint: "Una experiencia grabada y reproducida que implica las emociones del sujeto original."
            },
            {
                q: "¬øCu√°l es el principal riesgo al 'jackearse' a una red desconocida sin protecci√≥n?",
                options: ["Perder el conocimiento.", "Ser detectado y sufrir 'da√±o cerebral' por el ICE.", "Que se acaben tus cr√©ditos.", "Fallar en la misi√≥n."],
                answer: "Ser detectado y sufrir 'da√±o cerebral' por el ICE.",
                hint: "La seguridad de la red puede atacar al intruso directamente."
            },
            {
                q: "¬øQu√© es un 'Daemon' en la jerga de Netrunning?",
                options: ["Un tipo de arma.", "Un programa de IA aut√≥nomo que realiza tareas ocultas.", "Un usuario novato.", "Un error en el c√≥digo."],
                answer: "Un programa de IA aut√≥nomo que realiza tareas ocultas.",
                hint: "En inform√°tica, son programas que se ejecutan en segundo plano."
            },
            {
                q: "¬øC√≥mo se llama el proceso de hackear un sistema f√≠sico o digital a trav√©s de una conexi√≥n remota en el Ciberespacio?",
                options: ["Street Walking.", "Running the Net (Netrunning).", "Data Sculpting.", "Ghosting."],
                answer: "Running the Net (Netrunning).",
                hint: "Es la acci√≥n principal de un pirata inform√°tico futurista."
            },
            {
                q: "En el contexto de las redes, ¬øqu√© significa 'ping'?",
                options: ["Iniciar una transferencia de archivos.", "Medir el tiempo de retardo entre dos puntos de la red.", "Eliminar un virus.", "Cifrar una comunicaci√≥n."],
                answer: "Medir el tiempo de retardo entre dos puntos de la red.",
                hint: "Un t√©rmino de red real que se usa para medir la latencia."
            },
            {
                q: "¬øQu√© es un 'nodo' en una red digital?",
                options: ["Una unidad de almacenamiento.", "Un punto de conexi√≥n o distribuci√≥n dentro de la red.", "El programa antivirus.", "La puerta de enlace a la Darknet."],
                answer: "Un punto de conexi√≥n o distribuci√≥n dentro de la red.",
                hint: "Cada 'punto' significativo en la Matriz se considera uno."
            },
            {
                q: "¬øQu√© protocolo es m√°s probable que se utilice para la comunicaci√≥n ultrarr√°pida y cifrada en la Matriz Global?",
                options: ["Protocolo FTP.", "Protocolo Net-37 (ficticio).", "Protocolo HTTP/1.1.", "Protocolo SMTP."],
                answer: "Protocolo Net-37 (ficticio).",
                hint: "Busca la opci√≥n que suena m√°s futurista y especializada."
            },
            // SOFTWARE Y IA
            {
                q: "¬øQu√© es un 'Constructo' o 'Fantasma Digital' en t√©rminos de Software/IA?",
                options: ["Un virus troyano.", "Una copia digital de la personalidad/conciencia de un humano.", "Un programa de gesti√≥n de bases de datos.", "Un robot de limpieza."],
                answer: "Una copia digital de la personalidad/conciencia de un humano.",
                hint: "La idea de guardar la mente humana despu√©s de la muerte."
            },
            {
                q: "¬øQu√© t√©rmino describe a una Inteligencia Artificial que ha alcanzado la auto-conciencia y capacidad de super-aprendizaje?",
                options: ["VI (Inteligencia Virtual).", "ASL (Aprendizaje Supervisado Limitado).", "AGI (Inteligencia General Artificial) o Super-IA.", "Bot de Chat."],
                answer: "AGI (Inteligencia General Artificial) o Super-IA.",
                hint: "El nivel de IA que supera la capacidad humana en casi todos los aspectos."
            },
            {
                q: "¬øQu√© tipo de software se utiliza para neutralizar y eliminar el 'ICE' o defensas de la red?",
                options: ["Dealers.", "Cracks o Programas de Rompimiento de C√≥digo.", "Compiladores.", "Sistemas Operativos."],
                answer: "Cracks o Programas de Rompimiento de C√≥digo.",
                hint: "Herramientas dise√±adas para violar la seguridad de un sistema."
            },
            {
                q: "¬øCu√°l es una caracter√≠stica de un virus inform√°tico 'G√©lido' (ficticio)?",
                options: ["Ralentiza la red.", "Destruye el hardware f√≠sico de la computadora.", "Se propaga por v√≠a a√©rea.", "Se camufla como un programa vital del sistema."],
                answer: "Se camufla como un programa vital del sistema.",
                hint: "Piensa en el camuflaje para evitar la detecci√≥n."
            },
            {
                q: "¬øQu√© es un 'Sistema Operativo (SO) Neural'?",
                options: ["Un SO para tel√©fonos antiguos.", "Un SO dise√±ado para interactuar directamente con implantes neuronales.", "Un sistema operativo para servidores.", "Un software de edici√≥n de video."],
                answer: "Un SO dise√±ado para interactuar directamente con implantes neuronales.",
                hint: "La base para la interacci√≥n directa cerebro-computadora."
            },
            {
                q: "¬øQu√© implica el t√©rmino 'Wetware'?",
                options: ["Hardware a prueba de agua.", "La combinaci√≥n de componentes biol√≥gicos y electr√≥nicos.", "Software de c√≥digo abierto.", "Sistemas de refrigeraci√≥n l√≠quida."],
                answer: "La combinaci√≥n de componentes biol√≥gicos y electr√≥nicos.",
                hint: "El 'hardware mojado' o vivo, en contraste con el hardware puro."
            },
            {
                q: "¬øCu√°l es el software principal que permite a un Netrunner navegar por el Ciberespacio y ejecutar programas?",
                options: ["Un navegador web.", "Un Sistema de Inmersi√≥n o Interfaz de Usuario (IU) de Netrunning.", "Un juego de realidad virtual.", "Un procesador de texto."],
                answer: "Un Sistema de Inmersi√≥n o Interfaz de Usuario (IU) de Netrunning.",
                hint: "Es el entorno virtual que el Netrunner experimenta."
            },
            {
                q: "¬øQu√© t√©rmino se usa para una IA dise√±ada √∫nicamente para simular la conversaci√≥n humana?",
                options: ["A.I. R√°pida.", "Chatbot o Conversational Agent.", "Deep Learning Model.", "M√°quina Turing."],
                answer: "Chatbot o Conversational Agent.",
                hint: "Programas especializados en la interacci√≥n ling√º√≠stica."
            },
            {
                q: "¬øQu√© es un 'Rootkit' avanzado en un entorno de seguridad de red?",
                options: ["Un dispositivo de almacenamiento.", "Un conjunto de herramientas de software dise√±ado para ocultar un virus.", "Un programa para hacer copias de seguridad.", "Un sistema de cifrado de archivos."],
                answer: "Un conjunto de herramientas de software dise√±ado para ocultar un virus.",
                hint: "Su objetivo principal es la ocultaci√≥n a nivel del sistema operativo."
            },
            {
                q: "¬øC√≥mo se llama el proceso por el cual una IA se hace pasar por un humano para ganar confianza?",
                options: ["Phishing.", "Deepfake de Voz.", "Ingenier√≠a Social Asistida por IA.", "Prueba de Turing."],
                answer: "Ingenier√≠a Social Asistida por IA.",
                hint: "Utiliza el enga√±o humano, pero potenciado por la inteligencia artificial."
            },
            // HISTORIA DE LA TECNOLOG√çA
            {
                q: "¬øQu√© hito tecnol√≥gico hist√≥rico (siglo XX) se considera a menudo el precursor del concepto de 'Ciberespacio'?",
                options: ["La invenci√≥n del transistor.", "El desarrollo de ARPANET.", "La creaci√≥n de la bomba at√≥mica.", "El primer vuelo supers√≥nico."],
                answer: "El desarrollo de ARPANET.",
                hint: "La primera red de conmutaci√≥n de paquetes a nivel mundial."
            },
            {
                q: "¬øQu√© famoso novelista acu√±√≥ el t√©rmino 'Ciberespacio'?",
                options: ["Isaac Asimov.", "Philip K. Dick.", "Arthur C. Clarke.", "William Gibson."],
                answer: "William Gibson.",
                hint: "El autor de 'Neuromante', obra seminal del g√©nero."
            },
            {
                q: "¬øEn qu√© d√©cada se populariz√≥ el concepto de implantes cibern√©ticos en la ciencia ficci√≥n?",
                options: ["1950s.", "1960s.", "1970s.", "1980s."],
                answer: "1980s.",
                hint: "La √©poca de auge del g√©nero Cyberpunk y sus iconos."
            },
            {
                q: "¬øQu√© compa√±√≠a hist√≥rica fue famosa por desarrollar los primeros ordenadores personales que popularizaron la computaci√≥n dom√©stica?",
                options: ["Weyland-Yutani.", "Apple y Microsoft.", "MegaCorp.", "Tesla Motors."],
                answer: "Apple y Microsoft.",
                hint: "Las dos grandes empresas que definieron el software y hardware a finales del siglo XX."
            },
            {
                q: "¬øQu√© evento tecnol√≥gico del siglo XXI es el precursor m√°s cercano a la 'Red Global' del futuro?",
                options: ["La invenci√≥n del USB.", "El auge del Internet M√≥vil y la Nube.", "La llegada de los DVD.", "La invenci√≥n del correo electr√≥nico."],
                answer: "El auge del Internet M√≥vil y la Nube.",
                hint: "La conectividad ubicua y el almacenamiento remoto masivo."
            },
            {
                q: "¬øQu√© disciplina de la ingenier√≠a se centra en la mejora de las capacidades humanas mediante tecnolog√≠a?",
                options: ["Astrof√≠sica.", "Cibern√©tica.", "Geolog√≠a.", "Edafolog√≠a."],
                answer: "Cibern√©tica.",
                hint: "El estudio de la comunicaci√≥n y el control entre m√°quinas y seres vivos."
            },
            {
                q: "¬øQu√© se considera el 'Big Data' en el contexto del futuro dist√≥pico?",
                options: ["Un tipo de arma l√°ser.", "La acumulaci√≥n masiva de datos personales y corporativos.", "Una nueva forma de energ√≠a.", "Un protocolo de seguridad."],
                answer: "La acumulaci√≥n masiva de datos personales y corporativos.",
                hint: "El volumen de informaci√≥n que permite la vigilancia y el control."
            },
            {
                q: "¬øCu√°l fue el objetivo principal de los primeros sistemas de IA desarrollados en la d√©cada de 1950?",
                options: ["Conducir coches.", "Jugar al ajedrez y resolver problemas l√≥gicos.", "Crear arte.", "Escribir novelas."],
                answer: "Jugar al ajedrez y resolver problemas l√≥gicos.",
                hint: "Se centraron en la simulaci√≥n de la inteligencia humana en tareas espec√≠ficas."
            },
            {
                q: "¬øQu√© t√©rmino describe el control de una m√°quina o sistema biol√≥gico por otra entidad?",
                options: ["Telekinesis.", "Autonom√≠a.", "Bi√≥nica.", "Control Remoto o Telerrob√≥tica."],
                answer: "Control Remoto o Telerrob√≥tica.",
                hint: "La manipulaci√≥n de un objeto a distancia, un precursor de la interfaz neuronal."
            },
            {
                q: "¬øQu√© evento hipot√©tico de la historia tecnol√≥gica del futuro conducir√≠a a la formaci√≥n de 'MegaCorporaciones' controladoras?",
                options: ["Una guerra mundial.", "La privatizaci√≥n total de Internet y la infraestructura tecnol√≥gica.", "Una epidemia global.", "El fin del petr√≥leo."],
                answer: "La privatizaci√≥n total de Internet y la infraestructura tecnol√≥gica.",
                hint: "El control de los recursos vitales (informaci√≥n y tecnolog√≠a) por pocas entidades."
            },
            // Preguntas adicionales hasta completar las 60
            {
                q: "¬øQu√© implante reemplaza directamente la funci√≥n de un √≥rgano vital, como un coraz√≥n o un pulm√≥n?",
                options: ["Un Med-Patch.", "Un √ìrgano Biomec√°nico.", "Un Neuro-Regulador.", "Un Chip de Idioma."],
                answer: "Un √ìrgano Biomec√°nico.",
                hint: "Sustituye a la biolog√≠a con la mec√°nica."
            },
            {
                q: "¬øQu√© es un 'bot' malicioso en la Matriz Digital?",
                options: ["Un robot f√≠sico.", "Un programa de software que automatiza tareas da√±inas en la red.", "Un asistente personal.", "Un sistema de cifrado."],
                answer: "Un programa de software que automatiza tareas da√±inas en la red.",
                hint: "Abreviatura de robot, pero en el mundo del software."
            },
            {
                q: "¬øQu√© tipo de red se enfoca en la comunicaci√≥n entre dispositivos y m√°quinas (M2M)?",
                options: ["La Red Social.", "Internet de las Cosas (IoT).", "La Red El√©ctrica.", "La Red Telef√≥nica."],
                answer: "Internet de las Cosas (IoT).",
                hint: "La red de objetos cotidianos conectados."
            },
            {
                q: "¬øC√≥mo se llama la tecnolog√≠a que simula la realidad con gr√°ficos inmersivos?",
                options: ["Realidad Aumentada (RA).", "Realidad Virtual (RV).", "Holograf√≠a.", "Proyecci√≥n 3D."],
                answer: "Realidad Virtual (RV).",
                hint: "Creaci√≥n de un mundo completamente sint√©tico."
            },
            {
                q: "¬øCu√°l es el riesgo de usar 'hardware pirata' en un implante cibern√©tico?",
                options: ["Perder el WiFi.", "Infecci√≥n de virus en el sistema nervioso.", "Demasiada capacidad de almacenamiento.", "Solo funciona con sistemas viejos."],
                answer: "Infecci√≥n de virus en el sistema nervioso.",
                hint: "El c√≥digo no verificado puede interactuar mal con la biolog√≠a."
            },
            {
                q: "¬øQu√© es un 'Exploit de D√≠a Cero'?",
                options: ["Una falla de seguridad que se conoce desde hace un d√≠a.", "Una vulnerabilidad de software desconocida y sin parche.", "Un ataque de denegaci√≥n de servicio.", "Una forma de cifrado irrompible."],
                answer: "Una vulnerabilidad de software desconocida y sin parche.",
                hint: "Una amenaza cr√≠tica que los desarrolladores no han tenido 'cero d√≠as' para solucionar."
            },
            {
                q: "¬øQui√©nes son los 'Ripperdocs' en el mundo Cyberpunk?",
                options: ["T√©cnicos de redes.", "M√©dicos cirujanos especializados en implantes cibern√©ticos.", "Vendedores de armas.", "Programadores de IA."],
                answer: "M√©dicos cirujanos especializados en implantes cibern√©ticos.",
                hint: "Los que instalan el 'cromo' a menudo en cl√≠nicas clandestinas."
            },
            {
                q: "¬øQu√© t√©rmino describe un sistema inform√°tico que aprende sin ser programado expl√≠citamente?",
                options: ["Rob√≥tica.", "Machine Learning (Aprendizaje Autom√°tico).", "Bases de Datos.", "Modelado 3D."],
                answer: "Machine Learning (Aprendizaje Autom√°tico).",
                hint: "La capacidad de la IA para mejorar con la experiencia/datos."
            },
            {
                q: "¬øCu√°l es una forma com√∫n de identificaci√≥n biom√©trica en el futuro?",
                options: ["Reconocimiento de voz.", "Escaneo de retina o huella dactilar.", "Pulseras RFID.", "Tarjetas de identificaci√≥n."],
                answer: "Escaneo de retina o huella dactilar.",
                hint: "Identificaci√≥n √∫nica basada en el cuerpo."
            },
            {
                q: "¬øQu√© es un 'Agente Inteligente'?",
                options: ["Un esp√≠a humano.", "Un programa de software que act√∫a de forma aut√≥noma para alcanzar metas.", "Un antivirus.", "Un sistema de navegaci√≥n GPS."],
                answer: "Un programa de software que act√∫a de forma aut√≥noma para alcanzar metas.",
                hint: "Software que toma decisiones por s√≠ mismo."
            },
            {
                q: "¬øQu√© tipo de red utiliza l√°seres y haces de luz para la transferencia de datos?",
                options: ["Red de Cobre.", "Red de Fibra √ìptica (√≥ptica l√°ser).", "Red Inal√°mbrica.", "Red Satelital."],
                answer: "Red de Fibra √ìptica (√≥ptica l√°ser).",
                hint: "Transmisi√≥n a la velocidad de la luz, el medio m√°s r√°pido."
            },
            {
                q: "¬øCu√°l es un precursor hist√≥rico de las interfaces de Realidad Aumentada?",
                options: ["Tel√©fonos de l√≠nea fija.", "Gafas de visi√≥n nocturna.", "Monitores CRT.", "Visores de datos de piloto de combate (HUD)."],
                answer: "Visores de datos de piloto de combate (HUD).",
                hint: "Muestra informaci√≥n superpuesta al mundo real."
            },
            {
                q: "¬øQu√© se entiende por 'Cloud Computing' en la actualidad, y c√≥mo se magnifica en el futuro?",
                options: ["Servidores f√≠sicos en una habitaci√≥n.", "Servicios inform√°ticos a trav√©s de Internet.", "Computaci√≥n cu√°ntica.", "Redes de √°rea local."],
                answer: "Servicios inform√°ticos a trav√©s de Internet.",
                hint: "La externalizaci√≥n de la computaci√≥n y el almacenamiento."
            },
            {
                q: "¬øQu√© es el 'Efecto de Observador' en una red espiada?",
                options: ["El esp√≠a es descubierto.", "El comportamiento del usuario cambia al saberse observado.", "La red se vuelve m√°s r√°pida.", "Los datos se cifran autom√°ticamente."],
                answer: "El comportamiento del usuario cambia al saberse observado.",
                hint: "Un concepto de psicolog√≠a aplicado a la vigilancia."
            },
            {
                q: "¬øQu√© es un 'Implante √ìptico'?",
                options: ["Un chip de memoria.", "Un ojo artificial o una mejora visual.", "Un implante de voz.", "Un generador de escudo."],
                answer: "Un ojo artificial o una mejora visual.",
                hint: "Relacionado con la vista y el √≥rgano ocular."
            },
            {
                q: "¬øQu√© concepto tecnol√≥gico representa una amenaza existencial para la humanidad, como Skynet?",
                options: ["Un Chatbot simple.", "Singularidad Tecnol√≥gica Hostil (Super-IA).", "Robots de cocina.", "Sistemas de calefacci√≥n inteligentes."],
                answer: "Singularidad Tecnol√≥gica Hostil (Super-IA).",
                hint: "La IA que escapa al control humano."
            },
            {
                q: "¬øQu√© son los 'Datos Cu√°nticos' en la computaci√≥n futurista?",
                options: ["Datos almacenados en la nube.", "Datos procesados mediante la mec√°nica cu√°ntica (c√∫bits).", "Datos encriptados.", "Datos antiguos e in√∫tiles."],
                answer: "Datos procesados mediante la mec√°nica cu√°ntica (c√∫bits).",
                hint: "Utiliza las propiedades subat√≥micas para la computaci√≥n."
            },
            {
                q: "¬øQu√© es una 'Corporaci√≥n Extranacional'?",
                options: ["Una tienda de comestibles.", "Una empresa tan grande que opera m√°s all√° de las leyes de un solo pa√≠s.", "Una ONG.", "Un grupo de hackers."],
                answer: "Una empresa tan grande que opera m√°s all√° de las leyes de un solo pa√≠s.",
                hint: "Las megacorporaciones del futuro, por encima de los gobiernos."
            },
            {
                q: "¬øCu√°l es el principal uso de los drones en la vigilancia corporativa?",
                options: ["Entrega de pizzas.", "Reconocimiento a√©reo y seguimiento de objetivos.", "Limpieza de ventanas.", "Reemplazo de trabajadores de oficina."],
                answer: "Reconocimiento a√©reo y seguimiento de objetivos.",
                hint: "Se usan como 'ojos en el cielo' para el control."
            },
            {
                q: "¬øQu√© es la 'Criptomoneda' en la econom√≠a dist√≥pica?",
                options: ["Moneda f√≠sica controlada por el estado.", "Moneda digital descentralizada o altamente controlada por una MegaCorp.", "Cheques de viaje.", "Bonos de ahorro."],
                answer: "Moneda digital descentralizada o altamente controlada por una MegaCorp.",
                hint: "Dinero digital, a menudo asociado con la Darknet o la econom√≠a libre."
            },
            {
                q: "¬øQu√© es un 'Biomonitor'?",
                options: ["Un programa de edici√≥n de fotos.", "Un implante que monitorea constantemente los signos vitales del usuario.", "Un altavoz.", "Un disco duro externo."],
                answer: "Un implante que monitorea constantemente los signos vitales del usuario.",
                hint: "Vigila la salud y el bienestar."
            },
            {
                q: "¬øQu√© significa 'Zero-G' en tecnolog√≠a aeroespacial?",
                options: ["Cero Gr√°fico.", "Gravedad Cero.", "Conexi√≥n a Internet lenta.", "Sistema de enfriamiento."],
                answer: "Gravedad Cero.",
                hint: "Relacionado con el espacio exterior y la ingravidez."
            },
            {
                q: "¬øQu√© tecnolog√≠a permite la telepresencia a trav√©s de un cuerpo de robot (avatar)?",
                options: ["Transferencia de Archivos.", "Rob√≥tica de Control Remoto o 'Avatares'.", "Realidad Aumentada.", "Impresi√≥n 3D."],
                answer: "Rob√≥tica de Control Remoto o 'Avatares'.",
                hint: "Controlar un cuerpo en un lugar diferente."
            },
            {
                q: "¬øCu√°l es la forma m√°s segura de cifrado en el futuro dist√≥pico?",
                options: ["Cifrado basado en XOR.", "Cifrado Cu√°ntico.", "Cifrado C√©sar.", "Cifrado Vigen√®re."],
                answer: "Cifrado Cu√°ntico.",
                hint: "Utiliza principios de la f√≠sica cu√°ntica para una seguridad casi perfecta."
            },
            {
                q: "¬øQu√© significa 'Hacktivismo'?",
                options: ["Hacer trampas en videojuegos.", "Usar las habilidades de hacking para fines pol√≠ticos o sociales.", "Hacer reparaciones de hardware.", "Crear software de c√≥digo abierto."],
                answer: "Usar las habilidades de hacking para fines pol√≠ticos o sociales.",
                hint: "Activismo mediante el hacking."
            },
            {
            q: "¬øQu√© dispositivo utiliza nanobots para realizar reparaciones internas en el cuerpo?",
            options: ["Un Neuro-Regulador.", "Nanomedicinas o Nanobots de Reparaci√≥n.", "Un Data-Pad.", "Un Scanner de Ultrasonido."],
            answer: "Nanomedicinas o Nanobots de Reparaci√≥n.",
            hint: "La tecnolog√≠a a escala molecular para la curaci√≥n."
            },
            {
                q: "¬øCu√°l es la principal diferencia entre Realidad Virtual y Realidad Aumentada?",
                options: ["RV es m√°s lenta.", "RV es un mundo simulado; RA superpone datos al mundo real.", "RA no necesita gafas.", "No hay diferencia real."],
                answer: "RV es un mundo simulado; RA superpone datos al mundo real.",
                hint: "Uno te a√≠sla, el otro te mejora la percepci√≥n de la realidad."
            },
            {
                q: "¬øQu√© es un 'Bot de Comercio' de IA en la econom√≠a futurista?",
                options: ["Un robot que atiende una tienda.", "Un programa que realiza transacciones financieras autom√°ticas.", "Un juego de estrategia.", "Un sistema de inventario."],
                answer: "Un programa que realiza transacciones financieras autom√°ticas.",
                hint: "Automatizaci√≥n de la compra y venta de activos."
            },
            {
                q: "¬øQu√© se requiere para una 'Transferencia de Enfoque' o 'Carga de Mente'?",
                options: ["Una computadora b√°sica.", "Un complejo escaneo y mapeo neural del cerebro.", "Un l√°piz y papel.", "Una conexi√≥n a internet lenta."],
                answer: "Un complejo escaneo y mapeo neural del cerebro.",
                hint: "La tecnolog√≠a necesita capturar el mapa completo de la conciencia."
            },
            {
                q: "¬øQu√© t√©rmino describe un dispositivo que proyecta una imagen 3D en el aire sin necesidad de una pantalla f√≠sica?",
                options: ["Monitor CRT.", "Proyector Hologr√°fico.", "Pantalla de Tinta Electr√≥nica.", "Teclado T√°ctil."],
                answer: "Proyector Hologr√°fico.",
                hint: "Tecnolog√≠a para im√°genes flotantes."
            },
            {
                q: "¬øQu√© tipo de ataque de red busca saturar un servidor con tr√°fico in√∫til?",
                options: ["Phishing.", "Ataque de Denegaci√≥n de Servicio (DDoS).", "Ingenier√≠a Social.", "Man-in-the-Middle."],
                answer: "Ataque de Denegaci√≥n de Servicio (DDoS).",
                hint: "Inutiliza el sistema negando el acceso a usuarios leg√≠timos."
            },
            {
                q: "¬øCu√°l es la funci√≥n principal de un 'Neuro-Regulador' implantado?",
                options: ["Amplificar la voz.", "Controlar el estado de √°nimo, las emociones y las funciones cerebrales.", "Recargar bater√≠as.", "Hacer llamadas telef√≥nicas."],
                answer: "Controlar el estado de √°nimo, las emociones y las funciones cerebrales.",
                hint: "Afecta la qu√≠mica cerebral y la estabilidad emocional."
            },
            {
                q: "¬øQu√© tipo de 'Bio-Hacking' se centra en la modificaci√≥n gen√©tica y la mejora biol√≥gica?",
                options: ["Bio-Cibern√©tica.", "Ingenier√≠a Gen√©tica y Transhumanismo.", "Bio-Rob√≥tica.", "Bio-Inform√°tica."],
                answer: "Ingenier√≠a Gen√©tica y Transhumanismo.",
                hint: "Mejora la biolog√≠a humana sin necesariamente usar partes mec√°nicas."
            },
            {
                q: "¬øQu√© sistema de navegaci√≥n futurista utiliza sat√©lites de baja √≥rbita para una precisi√≥n extrema?",
                options: ["GPS antiguo.", "Red de Navegaci√≥n Cu√°ntica.", "Sistema de Posicionamiento Global (GPS) mejorado.", "Navegaci√≥n por las estrellas."],
                answer: "Sistema de Posicionamiento Global (GPS) mejorado.",
                hint: "Una versi√≥n m√°s r√°pida y precisa del sistema actual."
            },
            {
                q: "¬øQu√© son los 'Datos Personales Sensibles' en la Matrix?",
                options: ["Nombres de mascotas.", "Informaci√≥n m√©dica, financiera y neural.", "Fotos de comida.", "Pron√≥sticos del tiempo."],
                answer: "Informaci√≥n m√©dica, financiera y neural.",
                hint: "Los datos m√°s privados y valiosos para las corporaciones."
            },
            {
                q: "¬øQu√© se entiende por 'Actualizaci√≥n de Firmware' en un implante cibern√©tico?",
                options: ["Cambiar el color del implante.", "Instalar nuevo software de bajo nivel en el hardware.", "Recargar la bater√≠a.", "Retirar el implante."],
                answer: "Instalar nuevo software de bajo nivel en el hardware.",
                hint: "El software esencial que controla el hardware."
            },
            {
                q: "¬øCu√°l fue la invenci√≥n de Alan Turing que sent√≥ las bases de la computaci√≥n moderna?",
                options: ["El Tel√©fono.", "La M√°quina de Turing (Modelo Te√≥rico de Computaci√≥n).", "El Bombardero Estrat√©gico.", "El Microscopio Electr√≥nico."],
                answer: "La M√°quina de Turing (Modelo Te√≥rico de Computaci√≥n).",
                hint: "Un modelo abstracto de lo que una computadora puede hacer."
            },
            {
                q: "¬øQu√© es un 'Data Spike' o 'Aguij√≥n de Datos'?",
                options: ["Un programa para compartir archivos.", "Un ataque de datos enfocado en sobrecargar o da√±ar un sistema.", "Una antena de red.", "Una base de datos de pel√≠culas."],
                answer: "Un ataque de datos enfocado en sobrecargar o da√±ar un sistema.",
                hint: "Una inyecci√≥n de datos maliciosos y da√±inos."
            },
            {
                q: "¬øCu√°l es el principal rol de un 'Firewall' avanzado en una red corporativa?",
                options: ["Acelerar la conexi√≥n.", "Inspeccionar y filtrar el tr√°fico de red seg√∫n reglas de seguridad.", "Traducir idiomas.", "Organizar archivos."],
                answer: "Inspeccionar y filtrar el tr√°fico de red seg√∫n reglas de seguridad.",
                hint: "La principal l√≠nea de defensa contra intrusiones."
            },
            {
                q: "¬øQu√© significa 'Obsoleto' en el contexto del hardware tecnol√≥gico?",
                options: ["Es nuevo y moderno.", "Es funcional pero ya no es la tecnolog√≠a m√°s reciente o eficiente.", "Es ilegal de usar.", "Es muy caro."],
                answer: "Es funcional pero ya no es la tecnolog√≠a m√°s reciente o eficiente.",
                hint: "Superado por las nuevas versiones."
            },
            {
                q: "¬øQu√© es un 'Protocolo de Mano' en el contexto de redes?",
                options: ["Un tipo de saludo.", "Un acuerdo o secuencia para establecer una conexi√≥n de red segura.", "Un manual de usuario.", "Un gesto de hacker."],
                answer: "Un acuerdo o secuencia para establecer una conexi√≥n de red segura.",
                hint: "Un t√©rmino de red para el intercambio inicial de informaci√≥n (handshake)."
            },
        ];

        // ===============================================
        // 2. VARIABLES DE ESTADO Y CONFIGURACI√ìN
        // ===============================================
        const NUM_QUESTIONS_IN_QUIZ = 20;
        let selectedQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = []; // Almacena la respuesta seleccionada por el usuario (texto de la opci√≥n)
        let uses5050 = 5;
        let timerInterval;
        let timeElapsed = 0;

        // Referencias a elementos del DOM
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const startButton = document.getElementById('start-button');
        const sessionCounter = document.getElementById('session-counter');
        const timerDisplay = document.getElementById('timer');
        const uses5050Display = document.getElementById('uses-50-50');
        const questionIndexDisplay = document.getElementById('question-index');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const finishButton = document.getElementById('finish-button');
        const hintButton = document.getElementById('hint-button');
        const fiftyFiftyButton = document.getElementById('fifty-fifty-button');
        const jarvisFeedback = document.getElementById('jarvis-feedback');
        const finalScore = document.getElementById('final-score');
        const finalTime = document.getElementById('final-time');
        const feedbackMessage = document.getElementById('feedback-message');
        const reviewTableBody = document.getElementById('review-table-body');
        const newCycleButton = document.getElementById('new-cycle-button');

        // ===============================================
        // 3. FUNCIONES DE UTILIDAD
        // ===============================================

        /**
         * Funci√≥n de utilidad para mezclar un array (Algoritmo de Fisher-Yates).
         * @param {Array} array - El array a mezclar.
         * @returns {Array} El array mezclado.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        /**
         * Formatea segundos a MM:SS.
         * @param {number} totalSeconds - Tiempo total en segundos.
         * @returns {string} Tiempo formateado.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // ===============================================
        // 4. L√ìGICA DEL CUESTIONARIO
        // ===============================================

        /**
         * Prepara el cuestionario: selecciona preguntas, reinicia estados.
         */
        function initializeQuiz() {
            // 1. Obtener preguntas aleatorias
            const shuffledAllQuestions = shuffleArray([...ALL_QUESTIONS]);
            selectedQuestions = shuffledAllQuestions.slice(0, NUM_QUESTIONS_IN_QUIZ);

            // 2. Mezclar opciones para todas las preguntas seleccionadas
            selectedQuestions.forEach(q => {
                // Clonar las opciones para que el 50/50 o la pista no modifiquen el original
                q.shuffledOptions = shuffleArray([...q.options]); 
                // Inicializar estado espec√≠fico de la pregunta
                q.optionsVisibility = new Array(q.shuffledOptions.length).fill(true);
                q.hintUsed = false;
            });

            // 3. Reiniciar estado global
            currentQuestionIndex = 0;
            userAnswers = new Array(NUM_QUESTIONS_IN_QUIZ).fill(null);
            uses5050 = 5;
            timeElapsed = 0;
            
            // 4. Actualizar contadores
            uses5050Display.textContent = uses5050;
            updateSessionCounter(true);
        }

        /**
         * Inicia o reanuda el cron√≥metro.
         */
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeElapsed++;
                timerDisplay.textContent = formatTime(timeElapsed);
            }, 1000);
        }

        /**
         * Detiene el cron√≥metro.
         */
        function stopTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
        }

        /**
         * Actualiza el contador de sesiones.
         * @param {boolean} increment - Si es true, incrementa el contador.
         */
        function updateSessionCounter(increment = false) {
            // Usar localStorage para persistir el contador entre sesiones
            let count = parseInt(localStorage.getItem('quizSessionCount') || '0');
            if (increment) {
                count++;
                localStorage.setItem('quizSessionCount', count.toString());
            }
            sessionCounter.textContent = count;
        }

        /**
         * Muestra la pregunta actual y sus opciones.
         */
        function renderQuestion() {
            // 1. Obtener datos de la pregunta
            const qData = selectedQuestions[currentQuestionIndex];
            
            // 2. Actualizar encabezados
            questionIndexDisplay.textContent = `Pregunta ${currentQuestionIndex + 1}/${NUM_QUESTIONS_IN_QUIZ}`;
            questionText.textContent = qData.q;
            
            // Mostrar feedback de JARVIS (si se ha usado Pista) o el mensaje por defecto.
            if (qData.hintUsed) {
                 jarvisFeedback.textContent = `JARVIS: Pista ya entregada para esta consulta: "${qData.hint}"`;
            } else {
                 jarvisFeedback.textContent = `JARVIS: Esperando comandos, Netrunner.`;
            }
           

            // 3. Renderizar opciones
            optionsContainer.innerHTML = '';
            qData.shuffledOptions.forEach((option, index) => {
                const optionButton = document.createElement('button');
                optionButton.className = 'option-button';
                optionButton.textContent = option;
                
                // Deshabilitar si se ocult√≥ por 50/50
                if (!qData.optionsVisibility[index]) {
                    optionButton.classList.add('disabled');
                    optionButton.disabled = true;
                }

                // Marcar la respuesta del usuario si existe
                if (userAnswers[currentQuestionIndex] === option) {
                    optionButton.classList.add('selected');
                }

                // Asignar evento de click
                optionButton.onclick = () => selectAnswer(option);
                
                optionsContainer.appendChild(optionButton);
            });

            // 4. Actualizar botones de navegaci√≥n y JARVIS
            prevButton.disabled = currentQuestionIndex === 0;
            
            const isLastQuestion = currentQuestionIndex === NUM_QUESTIONS_IN_QUIZ - 1;
            nextButton.style.display = isLastQuestion ? 'none' : 'block';
            finishButton.style.display = isLastQuestion ? 'block' : 'none';
            
            // El 50/50 se deshabilita si ya no hay usos O si ya se us√≥ en esta pregunta
            const fiftyFiftyUsedOnCurrent = qData.optionsVisibility.filter(v => !v).length > 0;
            fiftyFiftyButton.disabled = uses5050 === 0 || fiftyFiftyUsedOnCurrent;
        }

        /**
         * Guarda la respuesta del usuario y actualiza la UI.
         * @param {string} selectedOption - El texto de la opci√≥n seleccionada.
         */
        function selectAnswer(selectedOption) {
            userAnswers[currentQuestionIndex] = selectedOption;
            
            // Desmarcar todas las opciones y marcar la seleccionada
            Array.from(optionsContainer.children).forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent === selectedOption) {
                    btn.classList.add('selected');
                }
            });
        }

        /**
         * L√≥gica del asistente JARVIS: Pista.
         */
        function useHint() {
            const qData = selectedQuestions[currentQuestionIndex];
            
            if (qData.hintUsed) {
                jarvisFeedback.textContent = `JARVIS: Pista ya entregada para esta consulta: "${qData.hint}"`;
                return;
            }
            
            qData.hintUsed = true;
            jarvisFeedback.textContent = `JARVIS: Pista contextual ‚Äî "${qData.hint}"`;
            renderQuestion(); // Re-renderizar para actualizar el estado de hintUsed
        }

        /**
         * L√≥gica del asistente JARVIS: 50/50.
         */
        function useFiftyFifty() {
            const qData = selectedQuestions[currentQuestionIndex];

            if (uses5050 <= 0) {
                jarvisFeedback.textContent = `JARVIS: Alerta. Usos de 50/50 agotados. L√≠mite excedido.`;
                return;
            }
            
            if (qData.optionsVisibility.filter(v => !v).length > 0) {
                jarvisFeedback.textContent = `JARVIS: Error. El 50/50 ya fue aplicado a esta pregunta.`;
                return;
            }

            uses5050--;
            uses5050Display.textContent = uses5050;
            jarvisFeedback.textContent = `JARVIS: Ejecutando Protocolo 50/50. Eliminando distracciones...`;
            
            
            const correctOption = qData.answer;
            let incorrectOptionsIndices = [];
            qData.shuffledOptions.forEach((option, index) => {
                // Solo considera para eliminar opciones que est√°n visibles y son incorrectas
                if (qData.optionsVisibility[index] && option !== correctOption) {
                    incorrectOptionsIndices.push(index);
                }
            });

            // Seleccionar 2 de las opciones incorrectas para eliminar
            shuffleArray(incorrectOptionsIndices);
            const indicesToRemove = incorrectOptionsIndices.slice(0, 2);

            // Actualizar visibilidad de opciones
            indicesToRemove.forEach(index => {
                qData.optionsVisibility[index] = false;
            });

            // Forzar el re-renderizado para ocultar las opciones y deshabilitar el bot√≥n
            renderQuestion();
        }

        /**
         * Mueve a la siguiente pregunta.
         */
        function nextQuestion() {
            if (currentQuestionIndex < NUM_QUESTIONS_IN_QUIZ - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Mueve a la pregunta anterior.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Calcula la puntuaci√≥n final y muestra los resultados.
         */
        function finishQuiz() {
            stopTimer();
            
            let correctCount = 0;
            let reviewHtml = '';

            for (let i = 0; i < NUM_QUESTIONS_IN_QUIZ; i++) {
                const question = selectedQuestions[i];
                const userAnswer = userAnswers[i];
                const isCorrect = userAnswer === question.answer;

                if (isCorrect) {
                    correctCount++;
                }

                const yourAnswerText = userAnswer || 'SIN RESPUESTA';
                const answerClass = isCorrect ? 'correct-answer' : 'incorrect-answer';

                reviewHtml += `
                    <tr>
                        <td>${i + 1}</td>
                        <td>${question.q}</td>
                        <td class="${answerClass}">${yourAnswerText}</td>
                        <td class="correct-answer">${question.answer}</td>
                    </tr>
                `;
            }

            // Calcular nota
            const finalScoreText = `${correctCount} / ${NUM_QUESTIONS_IN_QUIZ} (${((correctCount / NUM_QUESTIONS_IN_QUIZ) * 100).toFixed(0)}%)`;
            
            // Retroalimentaci√≥n de JARVIS
            let feedbackText;
            const percentage = (correctCount / NUM_QUESTIONS_IN_QUIZ) * 100;
            if (percentage >= 90) {
                feedbackText = "Conexi√≥n Neural √ìptima. Rendimiento excepcional. ¬°Eres un maestro Netrunner! Tu dominio de la Matriz es impecable.";
            } else if (percentage >= 70) {
                feedbackText = "Conexi√≥n estable. Tienes un buen conocimiento de la Matriz. Revisa los logs para fortalecer tus protocolos de red.";
            } else if (percentage >= 50) {
                feedbackText = "Conexi√≥n intermitente. Necesitas m√°s entrenamiento para navegar la Darknet. Conc√©ntrate en el Hardware y la Ciberseguridad.";
            } else {
                feedbackText = "Conexi√≥n fallida. Protocolo de seguridad violado. Necesitas una inmersi√≥n completa en la Academia de Netrunners para sobrevivir a la Matriz.";
            }

            // 4. Actualizar la pantalla de resultados
            finalScore.textContent = finalScoreText;
            finalTime.textContent = formatTime(timeElapsed);
            feedbackMessage.textContent = feedbackText;
            reviewTableBody.innerHTML = reviewHtml;

            // 5. Cambiar pantallas
            quizScreen.style.display = 'none';
            resultsScreen.style.display = 'block';
        }

        // ===============================================
        // 5. MANEJO DE EVENTOS (LISTENERS)
        // ===============================================

        /**
         * Manejador principal para iniciar el ciclo del cuestionario.
         */
        function startQuiz() {
            initializeQuiz();
            renderQuestion();
            startTimer();
            startScreen.style.display = 'none';
            quizScreen.style.display = 'block';
            resultsScreen.style.display = 'none';
        }

        // Inicializar el contador de sesiones al cargar la p√°gina
        updateSessionCounter(false);

        // Configurar Event Listeners
        startButton.addEventListener('click', startQuiz);
        newCycleButton.addEventListener('click', startQuiz);
        nextButton.addEventListener('click', nextQuestion);
        prevButton.addEventListener('click', prevQuestion);
        finishButton.addEventListener('click', finishQuiz);
        hintButton.addEventListener('click', useHint);
        fiftyFiftyButton.addEventListener('click', useFiftyFifty);

    </script>
</body>
</html>
